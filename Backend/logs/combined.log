{"code":20,"codeName":"IllegalOperation","errorLabelSet":{},"errorResponse":{"code":20,"codeName":"IllegalOperation","errmsg":"Transaction numbers are only allowed on a replica set member or mongos","ok":0},"level":"error","message":"Lỗi hợp nhất giỏ hàng cho userId: 6848e6354b689f0a38a8ede7, guestId: 103cdf2b-381a-4857-8f01-c48dae681bc5 Transaction numbers are only allowed on a replica set member or mongos","ok":0,"stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.sendCommand (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:327:26)\n    at async Server.command (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\sdam\\server.js:168:29)\n    at async FindOperation.execute (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\operations\\find.js:36:16)\n    at async tryOperation (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)","timestamp":"2025-06-18 11:19:53"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:26:16"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 103cdf2b-381a-4857-8f01-c48dae681bc5 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:26:16"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:42:14"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: e88a826f-9de2-4b72-98f9-1ec1c0f34ea1 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:42:14"}
{"level":"info","message":"Giới hạn số lượng biến thể 6847f2d423e3679ec84a788c ở mức tồn kho: 8 cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:43:44"}
{"level":"info","message":"Hợp nhất 0 mặt hàng thành công từ guestId: 49e09513-48eb-42fe-9bd1-57c377eb96d4 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:43:44"}
{"level":"warn","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã tồn tại và có sản phẩm","timestamp":"2025-06-18 11:48:00"}
{"level":"error","message":"Lỗi đăng nhập: Cart is not defined","stack":"ReferenceError: Cart is not defined\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:98:26)","timestamp":"2025-06-18 11:54:06"}
{"level":"error","message":"Lỗi đăng nhập: Cart is not defined","stack":"ReferenceError: Cart is not defined\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:98:26)","timestamp":"2025-06-18 11:54:15"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:55:48"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:55:56"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:35"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:44"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:46"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:49"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 12:00:55"}
{"level":"error","message":"Lỗi đăng nhập: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:123:39)","timestamp":"2025-06-18 12:01:40"}
{"level":"error","message":"Lỗi đăng nhập: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:123:39)","timestamp":"2025-06-18 12:01:59"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:34"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:38"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:41"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:52"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:56"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:17"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:29"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:33"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:49"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:49:07"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:49:14"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:51:18"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã chứa sản phẩm, xóa guestCart: 46566d3c-0eab-40f6-b4e2-19d598473194","timestamp":"2025-06-18 19:54:23"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 19:55:33"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 5f90170f-cdf6-4f06-ba97-66864904f4e6 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 19:55:33"}
{"level":"info","message":"Không tìm thấy giỏ hàng khách với guestId: e0895b7b-c183-4e84-9032-134e9708011b hoặc giỏ hàng rỗng","timestamp":"2025-06-19 17:09:40"}

{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-21 11:11:00"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: c3045eaf-4b44-468e-a300-d46cdcfdc82b sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-21 11:11:00"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã chứa sản phẩm, xóa guestCart: b79dbc19-5cb5-456e-8d86-83983bbe488e","timestamp":"2025-06-21 11:11:42"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 68562bfbe1a9f8d220a466b4","timestamp":"2025-06-21 11:12:27"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 824d70a9-44fe-44c1-9355-747c34c4f60b sang userId: 68562bfbe1a9f8d220a466b4","timestamp":"2025-06-21 11:12:27"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-21 11:17:18"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: ef7be56b-277d-4b29-97e9-8f433263dab6 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-21 11:17:18"}

{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-21 12:51:23"}
{"level":"info","message":"Hợp nhất 2 mặt hàng thành công từ guestId: f3bf8bda-ac65-40ae-8a9b-54090b7ae81b sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-21 12:51:23"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 68563aade498442d7c09fe11","timestamp":"2025-06-21 12:51:59"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 940c6403-7f42-40f8-bfea-0c7c5cb77751 sang userId: 68563aade498442d7c09fe11","timestamp":"2025-06-21 12:51:59"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 68562bfbe1a9f8d220a466b4","timestamp":"2025-06-21 12:52:51"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 443792d4-f010-4923-aa60-cecf1474022f sang userId: 68562bfbe1a9f8d220a466b4","timestamp":"2025-06-21 12:52:51"}

{"level":"info","message":"Tạo giỏ hàng mới cho userId: 68480739b6d432cc252f3c0a","timestamp":"2025-06-21 12:57:27"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: ded40b27-99b2-443f-8989-636b87fb454c sang userId: 68480739b6d432cc252f3c0a","timestamp":"2025-06-21 12:57:27"}

{"level":"info","message":"Giỏ hàng người dùng với userId: 68480739b6d432cc252f3c0a đã chứa sản phẩm, xóa guestCart: 3f85a81e-a7f6-4a08-ac6a-590c18dd3441","timestamp":"2025-06-22 16:28:14"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 685613015c51f91eeac98b99","timestamp":"2025-06-22 16:35:29"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 59910ecb-2b92-4f6a-b10d-752cd0d74635 sang userId: 685613015c51f91eeac98b99","timestamp":"2025-06-22 16:35:29"}



{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6853e7e019a0d3db27398975","timestamp":"2025-06-23 18:38:20"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: eb64b22f-2a13-4392-8d2c-e8f728af3389 sang userId: 6853e7e019a0d3db27398975","timestamp":"2025-06-23 18:38:20"}

{"level":"info","message":"Không tìm thấy giỏ hàng khách với guestId: dec750ee-efe9-4b5d-be6e-9bba8b8920db hoặc giỏ hàng rỗng","timestamp":"2025-06-25 10:11:04"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 68482de9d33140e1b15ab182 đã chứa sản phẩm, xóa guestCart: ede5a83d-e672-45ce-8951-662c0a95bd9c","timestamp":"2025-06-25 13:04:05"}


{"level":"info","message":"Không tìm thấy giỏ hàng khách với guestId: 576ac0ee-34e6-443c-9ff3-d50da1001f5e hoặc giỏ hàng rỗng","timestamp":"2025-06-25 20:46:12"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 684e7db9b88d5970104db7ed","timestamp":"2025-06-29 19:59:19"}
{"level":"info","message":"Hợp nhất 3 mặt hàng thành công từ guestId: edd030c4-1f8e-4640-8109-900f2a610d6e sang userId: 684e7db9b88d5970104db7ed","timestamp":"2025-06-29 19:59:19"}
{"level":"info","message":"Không tìm thấy giỏ hàng khách với guestId: d299bb52-8d0b-44bc-9fc8-4c5ea4be3578 hoặc giỏ hàng rỗng","timestamp":"2025-06-30 20:46:58"}

{"level":"info","message":"Không tìm thấy giỏ hàng khách với guestId: 2a25cd75-be37-4d69-8d37-799ddd0fc1d8 hoặc giỏ hàng rỗng","timestamp":"2025-06-25 18:08:49"}


{"level":"info","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã chứa sản phẩm, xóa guestCart: 3d8f8eb9-768a-443a-99b8-60568bb2564f","timestamp":"2025-06-25 22:25:50"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 68563aade498442d7c09fe11 đã chứa sản phẩm, xóa guestCart: 3a7bb784-f397-4b48-be4a-f8dce04fa0c0","timestamp":"2025-06-25 22:57:41"}

{"level":"error","message":"Lỗi addToCart:","timestamp":"2025-06-25 23:37:32"}
{"level":"warn","message":"Bỏ qua biến thể không hợp lệ: 6857e46182e0a1c4037ceb5f","timestamp":"2025-06-25 23:41:39"}
{"level":"info","message":"Hợp nhất 0 mặt hàng thành công từ guestId: 1d9a1656-b320-444a-83d0-7dae0905d0f3 sang userId: 68563aade498442d7c09fe11","timestamp":"2025-06-25 23:41:39"}
{"level":"warn","message":"Bỏ qua biến thể không hợp lệ: 6857e46182e0a1c4037ceb5f","timestamp":"2025-06-25 23:42:12"}
{"level":"info","message":"Hợp nhất 0 mặt hàng thành công từ guestId: 09cac27b-055f-47b7-bc85-b9210538b127 sang userId: 68563aade498442d7c09fe11","timestamp":"2025-06-25 23:42:12"}
{"level":"info","message":"Hợp nhất 3 mặt hàng thành công từ guestId: d39c0b57-8d01-471b-b43a-82dfe17e0742 sang userId: 68563aade498442d7c09fe11","timestamp":"2025-06-25 23:47:34"}
{"level":"info","message":"Hợp nhất 2 mặt hàng thành công từ guestId: 5e619d87-2479-43c7-811a-598efbf4ccf0 sang userId: 68482de9d33140e1b15ab182","timestamp":"2025-06-26 23:42:05"}

{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 4b6ed7ef-aa5e-4c0c-bb1a-38707ac9defa sang userId: 68562f78099fd3e0c637a3f7","timestamp":"2025-06-27 20:14:31"}
{"level":"info","message":"Không tìm thấy guestCart với guestId: 71e2382f-1ff5-4886-acbc-40b53bf1b046 hoặc giỏ hàng rỗng","timestamp":"2025-06-27 20:31:10"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 68562f78099fd3e0c637a3f7 đã chứa sản phẩm, xóa guestCart: 56b9b406-512f-46a4-aa7d-e00775072153","timestamp":"2025-06-27 20:45:15"}
{"level":"error","message":"Lỗi addToCart:","timestamp":"2025-06-27 20:52:10"}
{"level":"error","message":"Lỗi addToCart:","timestamp":"2025-06-27 20:52:12"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: caf13c58-c9e2-4341-a368-dd9bf076f097 sang userId: 6853e9cd4a1904a0dea13d4a","timestamp":"2025-06-29 17:07:51"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã chứa sản phẩm, xóa guestCart: e05426d4-f271-47db-98df-7acb1e2a2821","timestamp":"2025-06-29 17:08:59"}
{"level":"error","message":"Lỗi đăng nhập:","timestamp":"2025-06-29 18:17:44"}

{"level":"error","message":"Lỗi addToCart:","timestamp":"2025-07-02 20:52:09"}
{"level":"error","message":"Lỗi addToCart:","timestamp":"2025-07-02 20:52:10"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 3de8df95-2690-4f46-949c-6718cc39f490 sang userId: 684e7db9b88d5970104db7ed","timestamp":"2025-07-02 21:17:17"}
